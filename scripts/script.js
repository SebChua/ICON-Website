//#region Team Member Info JSON
let team = {
    "Executive": [
        {
            "firstName": "Sebastian",
            "lastName": "Chua",
            "division": "Executive",
            "role": "Project Manager",
            "key": "sebastianchua"
        },
        {
            "firstName": "Ivan",
            "lastName": "Darmawan",
            "division": "Executive",
            "role": "Project Manager",
            "key": "ivandarmawan"
        },
        {
            "firstName": "Adrian",
            "lastName": "Santoso",
            "division": "Executive",
            "role": "Secretary",
            "key": "adrianbagus"
        },
        {
            "firstName": "Audrey",
            "lastName": "Patricia",
            "division": "Executive",
            "role": "Secretary",
            "key": "audreypatricia"
        }
    ],
    "Events": [
        {
            "firstName": "Verren",
            "lastName": "Jesilia",
            "division": "Events",
            "role": "Events Director",
            "key": "verrenjesilia"
        },
        {
            "firstName": "Selina",
            "lastName": "Nicole",
            "division": "Events",
            "role": "Committee",
            "key": "selinanicole"
        },
        {
            "firstName": "Felia",
            "lastName": "Clarissa",
            "division": "Events",
            "role": "Committee",
            "key": "feliaclarissa"
        },
        {
            "firstName": "Ivana",
            "lastName": "Widjaja",
            "division": "Events",
            "role": "Committee",
            "key": "ivanawidjaja"
        }
    ],
    "Marketing": [
        {
            "firstName": "Glen",
            "lastName": "Odang",
            "division": "Marketing",
            "role": "Marketing Director",
            "key": "glenodang"
        },
        {
            "firstName": "Michelle",
            "lastName": "Gracia",
            "division": "Marketing",
            "role": "Committee",
            "key": "michellegracia"
        },
        {
            "firstName": "Williyanti",
            "lastName": "Tjoa",
            "division": "Marketing",
            "role": "Committee",
            "key": "williyantitjoa"
        },
        {
            "firstName": "Glenn",
            "lastName": "Kadarusman",
            "division": "Marketing",
            "role": "Committee",
            "key": "glennkadarusman"
        }
    ],
    "Design": [
        {
            "firstName": "Shannen",
            "lastName": "Patricia",
            "division": "Design",
            "role": "Design Director",
            "key": "shannenpatricia"
        },
        {
            "firstName": "Devi",
            "lastName": "Arifianti",
            "division": "Design",
            "role": "Committee",
            "key": "deviarifianti"
        },
        {
            "firstName": "Elena",
            "lastName": "Hadinata",
            "division": "Design",
            "role": "Committee",
            "key": "elenahadinata"
        },
        {
            "firstName": "Nicole",
            "lastName": "Samudera",
            "division": "Design",
            "role": "Committee",
            "key": "nicolesamudera"
        }
    ],
    "Liaison Officers": [
        {
            "firstName": "Calista",
            "lastName": "Amarati",
            "division": "Liaison Officer",
            "role": "Liaison Officer Director",
            "key": "calistaamarati"
        },
        {
            "firstName": "Adrian",
            "lastName": "Santoso",
            "division": "Liaison Officer",
            "role": "Liaison Officer",
            "key": "adrianbagus"
        },
        {
            "firstName": "Josella",
            "lastName": "Rachmat",
            "division": "Liaison Officer",
            "role": "Liaison Officer",
            "key": "josellarachmat"
        },
        {
            "firstName": "Elsa",
            "lastName": "Tjendana",
            "division": "Liaison Officer",
            "role": "Liaison Officer",
            "key": "elsatjendana"
        },
        {
            "firstName": "Shafira",
            "lastName": "Kurniadewi",
            "division": "Liaison Officer",
            "role": "Liaison Officer",
            "key": "shafirakurniadewi"
        }
    ],
    "Sponsorship": [
        {
            "firstName": "Cornelia",
            "lastName": "Michelle",
            "division": "Sponsorship",
            "role": "Sponsorship Director",
            "key": "corneliamichelle"
        },
        {
            "firstName": "Ezra",
            "lastName": "Bagaskara",
            "division": "Sponsorship",
            "role": "Committee",
            "key": "ezrabagaskara"
        },
        {
            "firstName": "Melinda",
            "lastName": "Saputera",
            "division": "Sponsorship",
            "role": "Committee",
            "key": "melindasaputera"
        },
        {
            "firstName": "Karen",
            "lastName": "Devanie",
            "division": "Sponsorship",
            "role": "Committee",
            "key": "karendevanie"
        }
    ],
    "Logistics": [
        {
            "firstName": "Marchia",
            "lastName": "Devana",
            "division": "Logistics",
            "role": "Logistics Director",
            "key": "marchiadevana"
        },
        {
            "firstName": "Meta",
            "lastName": "Agustina",
            "division": "Logistics",
            "role": "Committee",
            "key": "metaagustina"
        },
        {
            "firstName": "Sharon",
            "lastName": "Giovanni",
            "division": "Logistics",
            "role": "Committee",
            "key": "sharongiovani"
        },
        {
            "firstName": "Vincent",
            "lastName": "Julio",
            "division": "Logistics",
            "role": "Committee",
            "key": "vincentjulio"
        },
        {
            "firstName": "Anastasia",
            "lastName": "Kristabella",
            "division": "Logistics",
            "role": "Committee",
            "key": "anastasiakristabella"
        }
    ]
};
//#endregion
//#region Speaker Info JSON
let speakers = {
    "2017": [
        {
            "name": "Alamanda Shantika",
            "title": "Founder & CEO",
            "organisation": "Binar Academy"
        },
        {
            "name": "Daniel Mananta",
            "title": "Founder & CEO",
            "organisation": "DAMN! I LOVE INDONESIA"
        },
        {
            "name": "Andy F. Noya",
            "title": "Host",
            "organisation": "Kick Andy"
        },
        {
            "name": "Noor Huda Ismail",
            "title": "Founder",
            "organisation": "Institute for International Peace Building Indonesia"
        },
        {
            "name": "Isyana Syarasvati",
            "title": "Performer",
            "organisation": ""
        }
    ],
    "2018": [
        {
            "name": "William Tanuwidjaja",
            "title": "Co-Founder & CEO",
            "organisation": "Tokopedia"
        },
        {
            "name": "Chelsea Islan",
            "title": "Co-Founder & President",
            "organisation": "Youth of Indonesia"
        },
        {
            "name": "Putra Nababan",
            "title": "Ex-Editor In Chief",
            "organisation": "Metro TV"
        },
        {
            "name": "Faye Simanjuntak",
            "title": "Founder",
            "organisation": "Rumah Faye"
        },
        {
            "name": "Arnold Poernomo",
            "title": "Chef & Co-Founder",
            "organisation": "Poernomo Brothers"
        },
        {
            "name": "Jaz",
            "title": "Performer",
            "organisation": ""
        }
    ],
    "2019": [
        {
            "name": "Alamanda Shantika",
            "title": "Founder & CEO",
            "organisation": "Binar Academy"
        },
        {
            "name": "Daniel Mananta",
            "title": "Founder & CEO",
            "organisation": "DAMN! I LOVE INDONESIA"
        },
        {
            "name": "Andy F. Noya",
            "title": "Host",
            "organisation": "Kick Andy"
        },
        {
            "name": "Noor Huda Ismail",
            "title": "Founder",
            "organisation": "Institute for International Peace Building Indonesia"
        },
        {
            "name": "Isyana Syarasvati",
            "title": "Performer",
            "organisation": ""
        }
    ]
};
//#endregion
//#region Website Content
let content = {
    social_media: {
        facebook: 'https://www.facebook.com/PPIA.ICON2018/',
        instagram: 'https://www.instagram.com/icon_2019/',
        email: 'mailto:unsw.ppia@gmail.com'
    },
    event_details: {
        date: 'July 27, 2019',
        venue: 'Wesley Conference Center',
        place: 'CBD'
    },
    about_section: {
        text: 'ICON is a platform for sharing IDEAS to INSPIRE the next generation of Indonesians to make an IMPACT. \
              It is a non-profit conference where influential speakers come and spread ideas, catalyzing development \
              and drive for the future generation of Indonesians.',
    },
    charity_section: {
        name: 'Semesta Foundation',
        text: 'Semesta focuses on providing care to the mentally-ill and education to poverty-stricken \
              and marginalised. They provide training, infrastructure development, and management advocacy \
              to aid these groups reclaim their livelihood for the better.',
        link: 'http://semestafoundation.org/?lang=en'
    }
};
//#endregion
$(document).ready(() => {
    applyHeaderEffects();
    buildThemeSection();
    buildEventDetailsSection();
    buildSpeakersSection();
    buildAboutSection();
    buildCharitySection();
    buildTeamSection();
});
function addButton(link, text, target_container) {
    $('<a>').prop({
        href: link,
        target: '_blank'
    }).addClass(['btn', 'btn-primary']).text(text).appendTo(target_container);
}
function applyHeaderEffects() {
    $('#theme-section img').css('max-height', $(window).height());
    // Scroll Effects on Header Navigation
    $(window).scroll(() => {
        let distanceFromTop = $('#theme-section').height() - 600;
        if ($(this).scrollTop() > distanceFromTop - $('#main-nav').height()) {
            $('#main-nav').css('background-color', 'rgba(0, 0, 0, 0.8)');
        }
        else {
            $('#main-nav').css('background-color', 'rgba(0, 0, 0, 0.10)');
        }
    });
}
function buildThemeSection() {
    // Backgrounds for divs are pre-specified in index.scss
    // Attaching both fade in and parallax effects into the layers
    let shape_layer = $('#theme-section .shapes-layer').data('depth', 0.5);
    let text_layer = $('#theme-section .text-layer').data('depth', 0.6);
    let layers = [shape_layer, text_layer];
    for (let layer of layers)
        layer.addClass('animated fadeIn');
    $(window).on('scroll', () => {
        // Referenced from:
        // https://medium.com/@PatrykZabielski/how-to-make-multi-layered-parallax-illustration-with-css-javascript-2b56883c3f27
        for (let layer of layers) {
            /* Adds the parallax effect by translating down the background image
             * by the depth property by the scroll position from the top */
            let translate_by = -1 * (window.scrollY * layer.data('depth'));
            layer.css('transform', 'translateY(' + translate_by + 'px)');
        }
    });
}
function buildEventDetailsSection() {
    let details_section = $('#event-details');
    let social_col_div = $('<div>').addClass('event-social-column');
    let social_col = $('<ul>').prop('id', 'social-column');
    let media_buttons = {
        'facebook': $('<a>').prop({
            target: '_blank',
            href: content.social_media['facebook']
        }).addClass(['fab', 'fa-facebook-f', 'fa-lg']),
        'instagram': $('<a>').prop({
            target: '_blank',
            href: content.social_media['instagram']
        }).addClass(['fab', 'fa-instagram', 'fa-lg']),
        'email': $('<a>').prop({
            href: content.social_media['email']
        }).addClass(['fas', 'fa-envelope', 'fa-lg'])
    };
    $('<li>').append(media_buttons['facebook']).appendTo(social_col);
    $('<li>').append(media_buttons['instagram']).appendTo(social_col);
    $('<li>').append(media_buttons['email']).appendTo(social_col);
    social_col.appendTo(social_col_div);
    let details_container = $('<div>').addClass('venue-time');
    $('<h1>').addClass('date').text(content.event_details['date']).appendTo(details_container);
    $('<h4>').addClass('venue').text(content.event_details['venue']).appendTo(details_container);
    $('<h5>').addClass('place').text(content.event_details['place']).appendTo(details_container);
    addButton('#', 'Get Tickets', details_container);
    social_col_div.appendTo(details_section);
    $('<div>').addClass('separator').appendTo(details_section);
    details_container.appendTo(details_section);
}
function buildSpeakersSection() {
    $('#speakers-history-row a').on('click', () => {
        $('#speaker-content-row').html('');
        // Strips 'ICON ' from the link text
        let year = $('#speakers-history-row').find('a:focus').text().substr(5);
        $('.speaker-div').css('flex', 100 / speakers[year].length + '%');
        console.log(speakers[year]);
        for (let i = 0; i < speakers[year].length; i++) {
            let speaker_container = $('<div>').text(' ').addClass('speaker-div speaker-img' + (i + 1));
            let overlay = $('<div>').addClass('overlay').appendTo(speaker_container);
            let details = $('<div>').addClass('details').appendTo(overlay);
            $('<h1>').text(speakers[year][i].name).appendTo(details);
            $('<h3>').text(speakers[year][i].title).appendTo(details);
            $('<h2>').text(speakers[year][i].organisation).appendTo(details);
            $('#speaker-content-row').append(speaker_container);
            attachSpeakerHoverEffect(speaker_container);
        }
    });
}
function attachSpeakerHoverEffect(container) {
    console.log('Attaching Hover Listener to ' + container);
    container.on('click', () => {
        $('.overlay').css('opacity', 1 + ' !important');
        console.log('Hovering over');
    });
}
function buildAboutSection() {
    let about_section = $('#about-section');
    let about_heading = $('<div>').addClass('about-heading');
    $('<h1>').text('About ICON').appendTo(about_heading);
    let about_details = $('<div>').addClass('about-details');
    $('<p>').text(content.about_section['text']).appendTo(about_details);
    about_section.append(about_heading);
    about_section.append($('<div>').addClass('separator'));
    about_section.append(about_details);
}
function buildCharitySection() {
    let charity_section = $('#charity-section');
    let charity_heading = $('<div>').addClass('charity-heading');
    $('<h1>').text('Our Charity').appendTo(charity_heading);
    $('<h2>').text(content.charity_section['name']).appendTo(charity_heading);
    let charity_details = $('<div>').addClass('charity-details');
    $('<p>').text(content.charity_section['text']).appendTo(charity_details);
    addButton(content.charity_section['link'], 'Learn More', charity_details);
    charity_section.append(charity_details);
    charity_section.append($('<div>').addClass('separator'));
    charity_section.append(charity_heading);
}
function buildTeamSection() {
    buildTeamPhotos('Executive');
    $('#teams-row a').on('click', () => {
        $('#team-photo-section').html('');
        let division = $('#teams-row').find('a:focus').text();
        buildTeamPhotos(division);
    });
}
function buildTeamPhotos(division) {
    let photoContainer = $('<div>').addClass('d-flex flex-wrap justify-content-center');
    for (let member of team[division]) {
        let profile = $('<div class="profile">');
        $('<img>').prop('src', buildImageURL(member)).appendTo(profile);
        $('<h4>').text(member.firstName + ' ' + member.lastName).appendTo(profile);
        $('<h6>').text(member.role).appendTo(profile);
        // Randomises the fade in animation time to create a twinkle star fade in effect
        let delay = Math.random() * 0.5;
        profile.css('animation-delay', delay + 's');
        profile.addClass('animated fadeIn');
        profile.appendTo(photoContainer);
    }
    photoContainer.appendTo($('#team-photo-section'));
}
//#region Helper Functions
function buildImageURL(member) {
    return '../assets/team-photos/' +
        normalise(member.division) +
        '/' + member.firstName + '-' + member.lastName + '.jpg';
}
function normalise(str) {
    return str.replace(/\s/g, '').toLowerCase();
}
